{"version":3,"file":"src_app_pages_login_login_module_ts.js","mappings":"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","sources":["./src/app/guards/LoginGuard.guard.ts","./src/app/pages/login/login.module.ts","./src/app/pages/login/login.page.ts","./src/app/pages/login/login.page.html"],"sourcesContent":["import { Injectable } from '@angular/core';\r\nimport {\r\n  ActivatedRouteSnapshot,\r\n  CanActivate,\r\n  Router,\r\n  RouterStateSnapshot,\r\n} from '@angular/router';\r\nimport { StorageService } from '../services/storage.service';\r\nimport { appUrl } from '../app-url.module';\r\n\r\n@Injectable({ providedIn: 'root' })\r\nexport class LoginGuard implements CanActivate {\r\n  constructor(private router: Router, private storageService: StorageService) {}\r\n\r\n  async canActivate(route: ActivatedRouteSnapshot, state: RouterStateSnapshot) {\r\n\r\n    const isAuthenticated = await this.storageService.storageData('token');\r\n\r\n    if (!!isAuthenticated) {\r\n      return this.router.navigate([appUrl.home]);\r\n    }\r\n\r\n    return true;\r\n  }\r\n}\r\n","import { NgModule } from '@angular/core';\n\nimport { LoginPage } from './login.page';\nimport { SharedModule } from 'src/app/shared/shared.module';\nimport { RouterModule } from '@angular/router';\nimport { LoginGuard } from 'src/app/guards/LoginGuard.guard';\nimport { SharedComponenttModule } from 'src/app/shared/shared-component.module';\n\n@NgModule({\n  imports: [\n    SharedModule,\n    RouterModule.forChild([\n      {\n        path: '',\n        component: LoginPage,\n        canActivate: [LoginGuard],\n      },\n    ]),\n    SharedComponenttModule,\n  ],\n  declarations: [LoginPage],\n})\nexport class LoginPageModule {}\n","import { Component, OnDestroy, OnInit, ViewChild } from '@angular/core';\nimport { FormControl, FormGroup, Validators } from '@angular/forms';\nimport { IonRouterOutlet } from '@ionic/angular';\nimport { Subscription } from 'rxjs';\nimport { AuthService } from 'src/app/services/auth.service';\nimport { GlobalService } from 'src/app/services/global.service';\n\n@Component({\n  selector: 'app-login',\n  templateUrl: './login.page.html',\n  styleUrls: ['./login.page.scss'],\n  providers: [IonRouterOutlet],\n})\nexport class LoginPage implements OnInit, OnDestroy {\n  @ViewChild(IonRouterOutlet, { static: true })\n  routerOutlet: IonRouterOutlet;\n  showPassword = false;\n  form!: FormGroup;\n\n  private ondestroy$ = new Subscription();\n\n  constructor(\n    private authService: AuthService,\n    private globalService: GlobalService\n  ) {}\n\n  get f() {\n    return this.form.controls;\n  }\n\n  ngOnInit() {\n    this.initializeForm();\n  }\n  ngOnDestroy(): void {\n    this.form.reset();\n    this.ondestroy$.unsubscribe();\n  }\n\n  async initializeForm() {\n    this.form = new FormGroup({\n      username: new FormControl('', [Validators.required]),\n      password: new FormControl('', [Validators.required]),\n    });\n  }\n\n  isShowPassword() {\n    this.showPassword = !this.showPassword;\n  }\n\n  onSave() {\n    if (this.form.invalid) {\n      return this.form.markAllAsTouched();\n    }\n\n    this.globalService.backdropLoading$.next(true);\n    this.authService.setUsername = this.f.username.value;\n    this.authService.setPassword = this.f.password.value;\n\n    this.authService.signIn().subscribe({\n      next: (data) => {\n        this.authService.saveAuthData(data);\n      },\n      error: () => {\n        this.globalService.backdropLoading$.next(false);\n      },\n      complete: () => {\n        this.globalService.backdropLoading$.next(false);\n      },\n    });\n  }\n}\n","export default \"<app-backdrop-loading></app-backdrop-loading>\\n\\n<ion-content class=\\\"ion-padding\\\">\\n  <div class=\\\"login-page\\\">\\n    <div class=\\\"login-logo\\\">\\n      <img src=\\\"assets/icons/login-ipos.png\\\" alt=\\\"login-ipos\\\" />\\n    </div>\\n    <div class=\\\"login-header\\\">\\n      <ion-text color=\\\"primary\\\">\\n        <h1>ເຂົ້າສູ່ລະບົບ</h1>\\n      </ion-text>\\n    </div>\\n\\n    <form [formGroup]=\\\"form\\\" (ngSubmit)=\\\"onSave()\\\">\\n      <div class=\\\"form-group\\\">\\n        <ion-text>\\n          <label>ຊື່ຜູ້ໃຊ້</label>\\n        </ion-text>\\n        <app-input-form\\n          type=\\\"text\\\"\\n          placeholder=\\\"ຊື່ຜູ້ໃຊ້\\\"\\n          [control]=\\\"$any(f['username'])\\\"\\n        >\\n        </app-input-form>\\n      </div>\\n      <div class=\\\"form-group\\\">\\n        <ion-text>\\n          <label> ລະຫັດຜ່ານ </label>\\n        </ion-text>\\n        <app-input-password\\n          type=\\\"password\\\"\\n          placeholder=\\\"ລະຫັດຜ່ານ\\\"\\n          [control]=\\\"$any(f['password'])\\\"\\n          [show]=\\\"showPassword\\\"\\n          (showPasswordEmit)=\\\"isShowPassword()\\\"\\n        ></app-input-password>\\n      </div>\\n\\n      <div class=\\\"form-action\\\">\\n        <ion-button type=\\\"submit\\\" size=\\\"default\\\" color=\\\"primary\\\" expand=\\\"block\\\">\\n          ເຂົ້າສູ່ລະບົບ\\n        </ion-button>\\n      </div>\\n    </form>\\n\\n    <div class=\\\"login-footer\\\">\\n      <p>ພັດທະນາໂດຍ JLS IT Solution</p>\\n    </div>\\n  </div>\\n</ion-content>\\n\";"],"names":[],"sourceRoot":"webpack:///"}